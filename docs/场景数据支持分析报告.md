# 知识图谱高级分析场景数据支持分析报告

## 执行时间
2025-01-XX

## 分析结论

### ✅ 总体评估：**完全支持**

现有知识图谱数据结构完全支持文档中提到的四个高级分析场景。所有必需的数据类型和关系都已具备，并且已生成增强的mock数据以更好地展示这些场景。

---

## 场景一：FraudRank 欺诈风险传导分析

### 数据支持情况

| 数据类型 | 现有数量 | 增强后 | 状态 |
|---------|---------|--------|------|
| 法律事件节点 | 20个 | 25个 | ✅ |
| - Case类型 | 10个 | 15个 | ✅ |
| - Dispute类型 | 10个 | 10个 | ✅ |
| 案件-合同关联 | 10条 | 15条 | ✅ |
| 纠纷-合同关联 | 10条 | 10条 | ✅ |
| 法人关系 | 90条 | 97条 | ✅ |
| - 共享法人公司组 | 18组 | 19组 | ✅ |
| 控股关系 | 15条 | 15条 | ✅ |
| 交易关系 | 100条 | 100条 | ✅ |
| 支付关系(PAYS) | 60条 | 82条 | ✅ |
| 收款关系(RECEIVES) | 60条 | 82条 | ✅ |

### 支持度评估
**✅ 优秀** - 完全支持FraudRank分析

### 增强数据说明
- 新增5个高风险法律事件（金额500万-1500万）
- 新增5条合同-法律事件关联
- 增强了风险传导路径的完整性

---

## 场景二：高级循环交易检测（分散-汇聚模式）

### 数据支持情况

| 数据类型 | 现有数量 | 增强后 | 状态 |
|---------|---------|--------|------|
| 交易节点 | 60个 | 71个 | ✅ |
| - INFLOW | 30个 | 35个 | ✅ |
| - OUTFLOW | 30个 | 36个 | ✅ |
| 资金流路径 | 60条 | 71条 | ✅ |
| 扇出节点(>=3笔流出) | 9个 | 10个 | ✅ |
| 扇入节点(>=3笔流入) | 9个 | 10个 | ✅ |

### 支持度评估
**✅ 优秀** - 完全支持分散-汇聚模式检测

### 增强数据说明
- 新增1个完整的分散-汇聚模式案例：
  - 核心公司：ORG_018（中国能源建设集团）
  - 分散节点：4个公司
  - 汇聚节点：CUS_015
  - 包含分散支付、中间交易、汇聚回流三个阶段
- 时间窗口：60天内完成完整循环

---

## 场景三：空壳公司网络识别

### 数据支持情况

| 数据类型 | 现有数量 | 增强后 | 状态 |
|---------|---------|--------|------|
| 公司节点 | 90个 | 98个 | ✅ |
| 多公司法人(>=3家) | 1个 | 2个 | ✅ |
| 快速流转交易 | 0个 | 8个 | ✅ |

### 支持度评估
**✅ 优秀** - 完全支持空壳公司识别

### 增强数据说明
- 新增4个空壳公司（SHELL_001-004）
- 共同法人：刘杰
- 特征：
  - 资金快速进出（1-5天内完成流转）
  - 穿透率高（流入流出金额接近）
  - 交易对手单一
  - 共享法人关系

---

## 场景四：关联方串通网络分析

### 数据支持情况

| 数据类型 | 现有数量 | 增强后 | 状态 |
|---------|---------|--------|------|
| 共享法人公司组 | 18组 | 19组 | ✅ |
| - 大型组(>=3家公司) | 1组 | 2组 | ✅ |
| 控股关系 | 15条 | 15条 | ✅ |
| 总合同数 | 100个 | 109个 | ✅ |
| 乙方合同数 | 100个 | 109个 | ✅ |
| 多次中标公司(>=2次) | 29个 | 32个 | ✅ |

### 支持度评估
**✅ 优秀** - 完全支持串通网络分析

### 增强数据说明
- 新增3个串通公司（COLL_001-003）
- 共同法人：刘杰
- 特征：
  - 轮流中标模式：3家公司轮流中标9个合同
  - 合同金额卡阈值：95万左右（接近100万审批阈值）
  - 时间规律：每月一个合同，轮流分配

---

## 数据完整性检查

### ✅ 节点类型完整性
- [x] Person（人员）
- [x] Company（公司）
- [x] Contract（合同）
- [x] LegalEvent（法律事件）
- [x] Transaction（交易）

### ✅ 边类型完整性
- [x] LEGAL_PERSON（法人关系）
- [x] CONTROLS（控股关系）
- [x] PARTY_A/B（合同签署关系）
- [x] TRADES_WITH（交易关系）
- [x] IS_SUPPLIER（供应商关系）
- [x] IS_CUSTOMER（客户关系）
- [x] PAYS（支付关系）
- [x] RECEIVES（收款关系）
- [x] INVOLVED_IN（涉及法律事件）
- [x] RELATED_TO（关联法律事件）

---

## 下一步建议

### 1. 数据导入
```bash
# 重新导入增强后的数据到Nebula Graph
uv run python src/nebula_import.py
```

### 2. 运行分析脚本
根据文档中的实施方案，可以运行以下分析：

```bash
# FraudRank分析
uv run python src/analysis/fraud_rank.py

# 循环交易检测
uv run python src/analysis/circular_trade.py

# 空壳公司识别
uv run python src/analysis/shell_company.py

# 串通网络分析
uv run python src/analysis/collusion.py
```

### 3. 验证分析结果
- 检查FraudRank是否能识别新增的高风险法律事件
- 验证循环交易检测是否能发现分散-汇聚模式
- 确认空壳公司识别能检测到新增的空壳公司网络
- 验证串通网络分析能识别轮流中标模式

---

## 数据文件清单

### 更新的文件
- `data/graph_data/nodes_legal_event.csv` - 新增5个法律事件
- `data/graph_data/nodes_transaction.csv` - 新增19个交易节点
- `data/graph_data/nodes_company.csv` - 新增7个公司（4个空壳公司+3个串通公司）
- `data/graph_data/nodes_contract.csv` - 新增9个合同
- `data/graph_data/edges_case_contract.csv` - 新增5条关联
- `data/graph_data/edges_company_transaction.csv` - 新增30条交易边
- `data/graph_data/edges_legal_person.csv` - 新增7条法人关系
- `data/graph_data/edges_party.csv` - 新增18条合同签署关系

---

## 总结

✅ **所有四个高级分析场景都得到了完整的数据支持**

现有知识图谱结构设计合理，包含了所有必需的数据类型和关系。通过生成的增强mock数据，可以更好地演示和测试这些高级分析场景。

建议：
1. 按照文档中的实施方案实现分析算法
2. 使用增强后的数据进行测试和验证
3. 根据实际业务需求调整算法参数和阈值

